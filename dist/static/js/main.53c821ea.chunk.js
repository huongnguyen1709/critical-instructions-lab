(this["webpackJsonpcritical-instructions"]=this["webpackJsonpcritical-instructions"]||[]).push([[0],{217:function(e,t,a){e.exports=a(408)},222:function(e,t,a){},408:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(30),l=a.n(i),s=(a(222),a(4)),c=a(7),o=a(3),u=Object(o.b)(null,(function(e){return{signOut:function(){return e((function(e,t,a){(0,a.getFirebase)().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))((function(e){return r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(s.c,{to:"/create"},"New Instruction")),r.a.createElement("li",null,r.a.createElement("a",{onClick:e.signOut},"Log Out")),r.a.createElement("li",null,r.a.createElement(s.c,{to:"/",className:"btn btn-floating pink lighten-1"},e.profile.initials)))})),m=function(){return r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(s.c,{to:"/signup"},"Signup")),r.a.createElement("li",null,r.a.createElement(s.c,{to:"/signin"},"Login")))},d=Object(o.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}))((function(e){var t=e.auth,a=e.profile,n=t.uid?r.a.createElement(u,{profile:a}):r.a.createElement(m,null);return r.a.createElement("nav",{className:"nav-wrapper grey darken-3"},r.a.createElement("div",{className:"container"},r.a.createElement(s.b,{to:"/",className:"brand-logo"},"theFirma"),n))})),h=a(19),p=a(11),E=a(12),g=a(14),f=a(13),b=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signIn(e.state)},e}return Object(E.a)(a,[{key:"render",value:function(){var e=this.props,t=e.authError;return e.auth.uid?r.a.createElement(c.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Sign In"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"Login"),r.a.createElement("div",{className:"red-text center"},t?r.a.createElement("p",null,t):null))))}}]),a}(n.Component),N=Object(o.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e((a=t,function(e,t,n){(0,n.getFirebase)().auth().signInWithEmailAndPassword(a.email,a.password).then((function(){e({type:"LOGIN_SUCCESS"})})).catch((function(t){e({type:"LOGIN_ERROR",error:t})}))}));var a}}}))(b),v=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",firstName:"",lastName:""},e.handleChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signUp(e.state)},e}return Object(E.a)(a,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.authError;return t.uid?r.a.createElement(c.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Sign Up"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{type:"text",id:"lastName",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement("input",{type:"text",id:"firstName",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"SignUp"),r.a.createElement("div",{className:"red-text center"},a?r.a.createElement("p",null,a):null))))}}]),a}(n.Component),w=Object(o.b)((function(e){return{auth:e.firebase.auth,authError:e.auth.authError}}),(function(e){return{signUp:function(t){return e(function(e){return function(t,a,n){var r=n.getFirebase,i=n.getFirestore,l=r(),s=i();l.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){return console.log(t),s.collection("users").doc(t.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0],email:e.email,password:e.password})})).then((function(){t({type:"SIGNUP_SUCCESS"})})).catch((function(e){t({type:"SIGNUP_ERROR",error:e})}))}}(t))}}}))(v),O=a(8),I=a(6),C=a(62),S=a.n(C),y=a(15),R=Object(I.d)(Object(o.b)((function(e,t){var a=t.match.params.id,n=e.firestore.data.instructions;return{instruction:n?n[a]:null,auth:e.firebase.auth,instructionId:a}}),(function(e){return{deleteInstruction:function(t,a){return e(function(e,t){return function(a,n,r){var i=r.getFirebase,l=(0,r.getFirestore)(),s=i();if(console.log(t.image),null===t.image)l.collection("instructions").doc(e).delete().then((function(){a({type:"DELETE_INSTRUCTION",instructionId:e})})).catch((function(e){a({type:"DELETE_INSTRUCTION_ERROR",err:e})}));else{var c=t.imageFileName;s.storage().ref("images/".concat(c)).delete().then((function(){l.collection("instructions").doc(e).delete().then((function(){a({type:"DELETE_INSTRUCTION",instructionId:e})})).catch((function(e){a({type:"DELETE_INSTRUCTION_ERROR",err:e})}))}))}}}(t,a))}}})),Object(O.firestoreConnect)([{collection:"instructions"}]))((function(e){var t=e.instruction,a=e.auth,n=e.instructionId;if(!a.uid)return r.a.createElement(c.a,{to:"/signin"});return t?r.a.createElement("div",{className:"container section"},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content flex-column"},r.a.createElement("span",{className:"card-title teal-text center heading"},t.title),r.a.createElement("p",{className:"mt-30"},t.content),t.image?r.a.createElement("img",{src:t.image,alt:t.imageFileName}):null),r.a.createElement("div",{className:"card-action grey lighten-4 grey-text flex-row"},r.a.createElement(s.b,{to:"/",className:"btn teal lighten-1 z-depth-0"},"Back"),r.a.createElement("span",{className:"center"},a.uid&&a.uid===t.authorId?r.a.createElement("div",null,r.a.createElement("div",null,"Posted by You"),r.a.createElement("div",null,S()(t.createdAt.toDate()).calendar())):a.uid?r.a.createElement("div",null,r.a.createElement("div",null,"Posted by ",t.authorFirstName," ",t.authorLastName),r.a.createElement("div",null,S()(t.createdAt.toDate()).calendar())):void 0),function(){if(a.uid===t.authorId)return r.a.createElement("div",null,r.a.createElement(s.b,{to:"/instruction/"+n+"/edit",className:"btn teal lighten-1 z-depth-0 mr-30"},"Edit"),r.a.createElement(s.b,{to:"/instruction/"+n+"-"+t.authorId+"/newQuestion",className:"btn teal lighten-1 z-depth-0 mr-30"},"Add Question"),r.a.createElement(s.b,{to:"/instruction/"+n+"/"+t.title+"/question",className:"btn teal lighten-1 z-depth-0 mr-30"},"See Question"),r.a.createElement("button",{className:"btn teal lighten-1 z-depth-0",onClick:function(){return function(t,n){a.uid===n.authorId&&window.confirm("Are you sure you want to delete ?")&&(e.deleteInstruction(t,n),e.history.push("/"))}(n,t)}},"Delete"))}()))):r.a.createElement("div",{className:"container center"},r.a.createElement("p",null,"Loading instruction..."))})),j=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={title:"",content:"",image:null},e.handleChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.handleImage=function(t){t.target.files[0]&&e.setState({image:t.target.files[0]})},e.handleSubmit=function(t){t.preventDefault(),e.props.createInstruction(e.state),e.props.history.push("/")},e}return Object(E.a)(a,[{key:"render",value:function(){return this.props.auth.uid?r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"New Instruction"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",id:"title",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"content"},"Instruction Content"),r.a.createElement("textarea",{id:"content",className:"materialize-textarea",onChange:this.handleChange})),r.a.createElement("div",{className:"file-field input-field mt-30"},r.a.createElement("div",{class:"btn"},r.a.createElement("span",null,"Select image"),r.a.createElement("input",{id:"image",type:"file",accept:"image/*",onChange:this.handleImage})),r.a.createElement("div",{class:"file-path-wrapper"},r.a.createElement("input",{class:"file-path validate",type:"text"}))),r.a.createElement("div",{className:"flex-row"},r.a.createElement(s.b,{to:"/",className:"btn teal lighten-1 z-depth-0"},"Back"),r.a.createElement("button",{className:"btn teal lighten-1 z-depth-0"},"Create")))):r.a.createElement(c.a,{to:"/signin"})}}]),a}(n.Component),T=Object(o.b)((function(e,t){return{auth:e.firebase.auth}}),(function(e){return{createInstruction:function(t){return e(function(e){return function(t,a,n){var r=n.getFirebase,i=n.getFirestore,l=r(),s=i(),c=a().firebase.profile,o=a().firebase.auth.uid,u=e.image;u?(console.log(u),l.storage().ref("images/".concat(u.name)).put(u).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){l.storage().ref("images").child(u.name).getDownloadURL().then((function(a){console.log(a),s.collection("instructions").add(Object(y.a)(Object(y.a)({},e),{},{image:a,imageFileName:u.name,authorFirstName:c.firstName,authorLastName:c.lastName,authorId:o,createdAt:new Date})).then((function(){t({type:"CREATE_INSTRUCTION",instruction:e})})).catch((function(e){t({type:"CREATE_INSTRUCTION_ERROR",error:e})}))}))}))):s.collection("instructions").add(Object(y.a)(Object(y.a)({},e),{},{image:null,authorFirstName:c.firstName,authorLastName:c.lastName,authorId:o,createdAt:new Date})).then((function(){t({type:"CREATE_INSTRUCTION",instruction:e})})).catch((function(e){t({type:"CREATE_INSTRUCTION_ERROR",err:e})}))}}(t))}}}))(j),x=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={id:"",title:"",content:"",newImage:null,imageOnChange:null,imageFileName:""},e.handleChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.handleImage=function(t){t.target.files&&t.target.files[0]?e.setState({newImage:t.target.files[0],imageOnChange:URL.createObjectURL(t.target.files[0])}):e.setState({newImage:null,imageOnChange:"There is no image"})},e.handleSubmit=function(t){t.preventDefault();var a=e.props,n=a.auth,r=a.instruction;n.uid===r.authorId&&(e.props.editInstruction(e.state),e.props.history.push("/"))},e}return Object(E.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.instructionId,a=e.instruction;t&&a&&this.setState({id:t,title:a.title,content:a.content,newImage:a.image,imageOnChange:a.image,imageFileName:a.imageFileName})}},{key:"componentWillReceiveProps",value:function(e){var t=e.instructionId,a=e.instruction;t&&a&&this.setState({id:t,title:a.title,content:a.content,newImage:a.image,imageOnChange:a.image,imageFileName:a.imageFileName})}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.content,n=e.imageOnChange,i=e.imageFileName;return this.props.auth.uid?(console.log(this.state.newImage),r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"cyan lighten-5 text-darken-3"},r.a.createElement("h5",null,"Editing"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"title",className:t?"active":null},"Title"),r.a.createElement("input",{type:"text",id:"title",value:t,onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"content",className:a?"active":null},"Project Content"),r.a.createElement("textarea",{id:"content",className:"materialize-textarea",value:a,onChange:this.handleChange})),r.a.createElement("div",{className:"input-field flex-row mt-30"},n?r.a.createElement("img",{src:n,alt:i,className:"center"}):null),r.a.createElement("div",{className:"file-field input-field mt-60"},r.a.createElement("div",{class:"btn"},r.a.createElement("span",null,"Change image"),r.a.createElement("input",{id:"image",type:"file",accept:"image/*",onChange:this.handleImage})),r.a.createElement("div",{class:"file-path-wrapper"},r.a.createElement("input",{class:"file-path validate",type:"text"}))),r.a.createElement("div",{className:"flex-row mt-30"},r.a.createElement(s.b,{to:"/",className:"btn teal lighten-1 z-depth-0"},"Cancel"),r.a.createElement("button",{className:"btn teal lighten-1 z-depth-0"},"Save"))))):r.a.createElement(c.a,{to:"/signin"})}}]),a}(n.Component),A=Object(I.d)(Object(o.b)((function(e,t){var a=t.match.params.id,n=e.firestore.data.instructions,r=n?n[a]:null;return{auth:e.firebase.auth,instruction:r,instructionId:a}}),(function(e){return{editInstruction:function(t){return e(function(e){return function(t,a,n){var r=n.getFirebase,i=n.getFirestore,l=r(),s=i(),c=e.imageFileName,o=e.newImage;if(console.log(c),console.log(o),o&&"undefined"===typeof o.name)console.log("case 1"),s.collection("instructions").doc(e.id).update({title:e.title,content:e.content}).then((function(){t({type:"EDIT_INSTRUCTION",instruction:e})})).catch((function(e){t({type:"EDIT_INSTRUCTION_ERROR",err:e})}));else if(o&&o.name!==c){console.log("case 2");var u=l.storage().ref("images/".concat(c));u.getDownloadURL().then((function(e){u.delete().then((function(){console.log("delete image successful")}))})).catch((function(e){console.log("There is no image to delete")})),l.storage().ref("images/".concat(o.name)).put(o).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){l.storage().ref("images").child(o.name).getDownloadURL().then((function(a){s.collection("instructions").doc(e.id).update({title:e.title,content:e.content,image:a,imageFileName:o.name}).then((function(){t({type:"EDIT_INSTRUCTION",instruction:e})})).catch((function(e){t({type:"EDIT_INSTRUCTION_ERROR",err:e})}))}))}))}else{console.log("case 3");var m=l.storage().ref("images/".concat(c));m.getDownloadURL().then((function(e){m.delete().then((function(){console.log("delete image successful")}))})).catch((function(e){console.log("There is no image to delete")})),s.collection("instructions").doc(e.id).update({title:e.title,content:e.content,image:null,imageFileName:"There is no image"}).then((function(){t({type:"EDIT_INSTRUCTION",instruction:e})})).catch((function(e){t({type:"EDIT_INSTRUCTION_ERROR",err:e})}))}}}(t))}}})),Object(O.firestoreConnect)([{collection:"instructions"}]))(x),q=Object(I.d)(Object(o.b)((function(e,t){var a=t.instruction.id,n=e.firestore.ordered.questions,r=!1;if(n&&n.length>0){var i=n.filter((function(e){return e.instructionId===a}));i&&n.length>0&&i.map((function(e){return r=!0}))}return{quesAvailable:r}})),Object(O.firestoreConnect)([{collection:"questions"}]))((function(e){var t=e.instruction,a=e.authUid,n=e.quesAvailable;console.log(n);return r.a.createElement("div",{className:"card z-depth-0 instruction-summary"},r.a.createElement("div",{className:"card-content grey-text text-darken-3"},r.a.createElement("span",{className:"card-title font-weight-350"},t.title),a&&!n?r.a.createElement("h6",{className:"red-text mt-30"},"There is no question for this instruction. Please add the question to verify the understanding of student"):null,r.a.createElement("div",{className:"mt-30"},a&&a===t.authorId?r.a.createElement("p",null,"Posted by You"):r.a.createElement("div",null,"Posted by ",t.authorFirstName," ",t.authorLastName),r.a.createElement("p",{className:"grey-text"},S()(t.createdAt.toDate()).calendar()))))})),D=function(e){var t=e.instructions,a=e.authUid;return t&&t.length>0?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6 offset-m2"},r.a.createElement("div",{className:"section"},t.map((function(e){return r.a.createElement(s.b,{to:"/instruction/"+e.id,key:e.id},r.a.createElement(q,{instruction:e,authUid:a}))}))))):t&&0!==t.length?r.a.createElement("div",{className:"container center"},r.a.createElement("p",null,"Loading instruction...")):r.a.createElement("div",{className:"container center black-text"},r.a.createElement("p",null,"There is no Instruction to view ..."),r.a.createElement("p",null,"Please add Instruction ..."))},F=a(216),_=a(48),U=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onMoveToNextIns=function(){var e=n.props,t=e.instructions,a=e.answer,r=e.questions,i=n.state.index,l=t[i];if(console.log(l),!0===a&&l){console.log("th1"),n.setState({instructions:[].concat(Object(F.a)(n.state.instructions),[l]),index:i+1,instructionId:l.id}),i===t.length-1&&n.setState({index:0,disabled:!0});var s=r.filter((function(e){return e.instructionId===l.id}));s&&s.length>0?(n.props.onResetAnswer(),n.setState({quesDisabled:!1})):(n.props.onHandleQuesAvai(),n.setState({quesDisabled:!0})),n.props.onReceiveDetail(l)}else if(l){var c=n.props.alert;console.log("you need to answer first"),c.show("you need to pass the question !")}else{n.props.alert.show("There is no instruction !")}},n.onShowDetail=function(e){n.props.onShowDetail(),n.props.onReceiveDetail(e)},n.onShowQuestion=function(){n.props.onShowQuestion()},n.state={index:0,instructions:[],disabled:!1,quesDisabled:!0},n}return Object(E.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.instructions,n=t.disabled,i=t.quesDisabled;return r.a.createElement("div",{className:"col s12 m6 offset-m2"},r.a.createElement("div",{className:"section"},a&&a.map((function(t){return r.a.createElement("div",{className:"card",key:t.id,onClick:function(){return e.onShowDetail(t)}},r.a.createElement(q,{instruction:t}))}))),r.a.createElement("button",{disabled:n||null,className:"btn waves-effect waves-light flex-row",onClick:this.onMoveToNextIns},"See Instructions",r.a.createElement("i",{className:"material-icons "},"arrow_downward")),r.a.createElement("button",{disabled:i||null,className:"btn waves-effect waves-light flex-row mt-30",onClick:this.onShowQuestion},"QuestionPopUp"))}}]),a}(n.Component),k=Object(I.d)(Object(_.d)(),Object(o.b)((function(e,t){return{questions:e.firestore.ordered.questions}})),Object(O.firestoreConnect)([{collection:"questions"}]))(U),Q=function(e){var t=e.instruction;return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content flex-column"},r.a.createElement("span",{className:"card-title teal-text center heading"},t.title),r.a.createElement("p",{className:"mt-30"},t.content),t.image?r.a.createElement("img",{src:t.image,alt:t.imageFileName}):null),r.a.createElement("div",{className:"card-action grey lighten-4 grey-text flex-row"},r.a.createElement("button",{className:"btn teal lighten-1 z-depth-0",onClick:function(){e.onShowDetail()}},"Back"))))},z=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onShowQuestion=function(){n.props.onShowQuestion()},n.handleOptionChange=function(e){var t=e.target.value,a=n.props.question;n.setState({selectedOption:t,answer:a&&a.map((function(e){return!(!e||t!==e.rightAnswer)}))})},n.handleSubmit=function(e){e.preventDefault(),console.log("You have selected: ",n.state.selectedOption),console.log(n.state.answer),n.props.onAnswer(n.state.answer),n.props.onShowQuestion()},n.state={question:{},selectedOption:"",answer:!1},n}return Object(E.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.question,n=t.instruction;console.log(this.state.answer);var i=a&&a.map((function(t){return t?r.a.createElement("div",{className:"section",key:a.id},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",{className:"card-content flex-column"},r.a.createElement("span",{className:"card-title teal-text center heading"},n.title),r.a.createElement("h6",null,a.question),r.a.createElement("h6",null,r.a.createElement("label",null,r.a.createElement("input",{className:"with-gap",name:"answer",type:"radio",value:t.rightAnswer,onChange:e.handleOptionChange}),r.a.createElement("span",null,t.rightAnswer))),r.a.createElement("h6",null,r.a.createElement("label",null,r.a.createElement("input",{className:"with-gap",name:"answer",type:"radio",value:t.answer2,onChange:e.handleOptionChange}),r.a.createElement("span",null,t.answer2))),r.a.createElement("h6",null,r.a.createElement("label",null,r.a.createElement("input",{className:"with-gap",name:"answer",type:"radio",value:t.answer3,onChange:e.handleOptionChange}),r.a.createElement("span",null,t.answer3))),r.a.createElement("h6",null,r.a.createElement("label",null,r.a.createElement("input",{className:"with-gap",name:"answer",type:"radio",value:t.answer4,onChange:e.handleOptionChange}),r.a.createElement("span",null,t.answer4)))),r.a.createElement("div",{className:"flex-row"},r.a.createElement("button",{className:"btn teal lighten-1 z-depth-0",onClick:e.onShowQuestion},"Back"),r.a.createElement("button",{className:"btn teal lighten-1 z-depth-0"},"Answer"))))):r.a.createElement("div",{key:"no-question"},"There is no question")}));return r.a.createElement("div",null,i)}}]),a}(n.Component),L=Object(I.d)(Object(o.b)((function(e,t){var a=e.firestore.ordered.questions,n=t.instruction.id;return{question:a.filter((function(e){return e.instructionId===n}))}})),Object(O.firestoreConnect)([{collection:"questions"}]))(z),P=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onShowDetail=function(){var e=n.state.showDetail;n.setState({showDetail:!e})},n.onReceiveDetail=function(e){n.setState({instruction:e})},n.onShowQuestion=function(){var e=n.state.showQuestion;n.setState({showQuestion:!e})},n.onResetAnswer=function(){n.setState({answer:!1})},n.onAnswer=function(e){console.log(e),e.map((function(e){return!0===e?(n.setState({answer:!0}),!0):(n.setState({answer:!1}),console.log("answer is false"),!1)}))},n.onHandleQuesAvai=function(){n.setState({answer:!0})},n.state={showDetail:!1,instruction:{},showQuestion:!1,answer:!0},n}return Object(E.a)(a,[{key:"render",value:function(){var e=this.props,t=e.instructions,a=e.auth,n=this.state,i=n.showDetail,l=n.instruction,s=n.showQuestion,c=n.answer;return r.a.createElement("div",{className:i?"container relative":"container"},r.a.createElement("div",{className:i||s?"row invisible":"row"},a.uid?r.a.createElement(D,{instructions:t,authUid:a.uid}):r.a.createElement(k,{instructions:t,onShowDetail:this.onShowDetail,onReceiveDetail:this.onReceiveDetail,onShowQuestion:this.onShowQuestion,onInstructionId:this.onInstructionId,answer:c,onResetAnswer:this.onResetAnswer,onAnswerCheck:this.onAnswerCheck,onHandleQuesAvai:this.onHandleQuesAvai})),r.a.createElement("div",{className:i?"popup":null},i?r.a.createElement(Q,{instruction:l,onShowDetail:this.onShowDetail}):null),r.a.createElement("div",{className:s?"popup":null},s?r.a.createElement(L,{instruction:l,onShowQuestion:this.onShowQuestion,onAnswer:this.onAnswer}):null))}}]),a}(n.Component),B=Object(I.d)(Object(o.b)((function(e,t){return{instructions:e.firestore.ordered.instructions,auth:e.firebase.auth}})),Object(O.firestoreConnect)([{collection:"instructions",orderBy:["createdAt","desc"]}]))(P),G=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={question:"",rightAnswer:"",answer2:"",answer3:"",answer4:""},e.handleChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a=e.props,n=a.instructionId,r=a.authorId;e.props.addQuestion(e.state,n,r),e.props.history.push("/")},e}return Object(E.a)(a,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.authorId;return t.uid?t.uid!==a?r.a.createElement(c.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Add Question"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"question"},"Question"),r.a.createElement("input",{type:"text",id:"question",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"rightAnswer"},"Right Answer"),r.a.createElement("textarea",{id:"rightAnswer",className:"materialize-textarea",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"answer2"},"Answer 2"),r.a.createElement("textarea",{id:"answer2",className:"materialize-textarea",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"answer3"},"Answer 3"),r.a.createElement("textarea",{id:"answer3",className:"materialize-textarea",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"answer4"},"Answer 4"),r.a.createElement("textarea",{id:"answer4",className:"materialize-textarea",onChange:this.handleChange})),r.a.createElement("div",{className:"flex-row"},r.a.createElement(s.b,{to:"/",className:"btn teal lighten-1 z-depth-0"},"Back"),r.a.createElement("button",{className:"btn teal lighten-1 z-depth-0"},"Create")))):r.a.createElement(c.a,{to:"/signin"})}}]),a}(n.Component),W=Object(o.b)((function(e,t){var a=t.match.params.id,n=t.match.params.authorId;return{auth:e.firebase.auth,instructionId:a,authorId:n}}),(function(e){return{addQuestion:function(t,a,n){return e(function(e,t,a){return function(n,r,i){i.getFirebase;(0,i.getFirestore)().collection("questions").add(Object(y.a)(Object(y.a)({},e),{},{instructionId:t,authorId:a})).then((function(){n({type:"ADD_QUESTION",question:e})})).catch((function(e){n({type:"ADD_QUESTION_ERROR",err:e})}))}}(t,a,n))}}}))(G),H=Object(I.d)(Object(o.b)((function(e,t){var a=t.match.params.id;console.log(a);var n,r=t.match.params.title,i=e.firestore.ordered.questions;return i&&i.length>0&&(n=i.filter((function(e){return e.instructionId===a}))),{auth:e.firebase.auth,title:r,instructionId:a,question:n}})),Object(O.firestoreConnect)([{collection:"questions"}]))((function(e){var t=e.question,a=e.instructionId,n=e.title;if(!e.auth.uid)return r.a.createElement(c.a,{to:"/signin"});return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m4 offset-m4"},r.a.createElement("div",{className:"card z-depth-0 instruction-summary"},r.a.createElement("div",{className:"card-content grey-text text-darken-3"},r.a.createElement("span",{className:"card-title teal-text center heading"},n),t&&t.length>0?t.map((function(e){return e?(console.log("th2"),console.log(e),r.a.createElement(s.b,{to:"/instruction/"+a+"/"+n+"/question/"+e.id+"/edit",key:e.id},r.a.createElement("div",{className:"card mt-60"},r.a.createElement("div",{className:"card-content grey-text text-darken-3"},r.a.createElement("h6",{className:"bold"},e.question),r.a.createElement("div",{className:"mt-30"},r.a.createElement("h6",null,r.a.createElement("span",{className:"bold"}," Option 1:")," \xa0 ",r.a.createElement("span",{className:"italic"},e.answer2)),r.a.createElement("h6",null,r.a.createElement("span",{className:"bold"}," Option 2:")," \xa0 ",r.a.createElement("span",{className:"italic"},e.answer3)),r.a.createElement("h6",null,r.a.createElement("span",{className:"bold"}," Option 3:")," \xa0 ",r.a.createElement("span",{className:"italic"},e.answer4)),r.a.createElement("h6",null,r.a.createElement("span",{className:"bold"}," Right Answer:")," \xa0 ",r.a.createElement("span",{className:"italic red-text"},e.rightAnswer))))))):r.a.createElement("h6",{className:"mt-60 center",key:"no-question"},"There is no question. Please add question !")})):r.a.createElement("h6",{className:"mt-60 center"},"There is no question. Please add question !"),r.a.createElement(s.b,{to:"/instruction/"+a,className:"btn teal lighten-1 z-depth-0 mt-60"},"Back")))))})),M=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={question:"",rightAnswer:"",answer2:"",answer3:"",answer4:""},e.handleChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a=e.props,n=a.questionId,r=a.instructionId,i=a.title;e.props.editQuestion(e.state,n),e.props.history.push("/instruction/".concat(r,"/").concat(i,"/question"))},e.onDelete=function(){var t=e.props,a=t.questionId,n=t.question;t.auth.uid===n.authorId&&window.confirm("Are you sure you want to delete ?")&&(e.props.deleteQuestion(n,a),e.props.history.push("/"))},e}return Object(E.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.question;e&&this.setState({question:e.question,rightAnswer:e.rightAnswer,answer2:e.answer2,answer3:e.answer3,answer4:e.answer4})}},{key:"componentWillReceiveProps",value:function(e){var t=e.question;t&&this.setState({question:t.question,rightAnswer:t.rightAnswer,answer2:t.answer2,answer3:t.answer3,answer4:t.answer4})}},{key:"render",value:function(){var e=this.props,t=e.auth,a=e.instructionId,n=e.title,i=this.state,l=i.question,o=i.rightAnswer,u=i.answer2,m=i.answer3,d=i.answer4;return t.uid?r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Editing Question"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"question",className:l?"active":null},"Question"),r.a.createElement("input",{type:"text",id:"question",onChange:this.handleChange,value:l})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"rightAnswer",className:o?"active":null},"Right Answer"),r.a.createElement("textarea",{id:"rightAnswer",className:"materialize-textarea",onChange:this.handleChange,value:o})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"answer2",className:u?"active":null},"Answer 2"),r.a.createElement("textarea",{id:"answer2",className:"materialize-textarea",onChange:this.handleChange,value:u})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"answer3",className:m?"active":null},"Answer 3"),r.a.createElement("textarea",{id:"answer3",className:"materialize-textarea",onChange:this.handleChange,value:m})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"answer4",className:d?"active":null},"Answer 4"),r.a.createElement("textarea",{id:"answer4",className:"materialize-textarea",onChange:this.handleChange,value:d})),r.a.createElement("div",{className:"flex-row"},r.a.createElement(s.b,{to:"/instruction/"+a+"/"+n+"/question",className:"btn teal lighten-1 z-depth-0"},"Cancel"),r.a.createElement("div",null,r.a.createElement("button",{className:"btn teal lighten-1 z-depth-0 mr-30",onClick:this.onDelete},"Delete Question"),r.a.createElement("button",{className:"btn teal lighten-1 z-depth-0",type:"submit"},"Save"))))):r.a.createElement(c.a,{to:"/signin"})}}]),a}(n.Component),K=Object(I.d)(Object(o.b)((function(e,t){var a=t.match.params.quesId,n=t.match.params.instrucId,r=t.match.params.title,i=e.firestore.data.questions,l=i?i[a]:null;return{auth:e.firebase.auth,question:l,questionId:a,instructionId:n,title:r}}),(function(e){return{editQuestion:function(t,a){return e(function(e,t){return function(a,n,r){r.getFirebase;(0,r.getFirestore)().collection("questions").doc(t).update(Object(y.a)({},e)).then((function(){a({type:"EDIT_QUESTION",question:e})})).catch((function(e){a({type:"EDIT_QUESTION_ERROR",err:e})}))}}(t,a))},deleteQuestion:function(t,a){return e(function(e,t){return function(e,a,n){n.getFirebase;(0,n.getFirestore)().collection("questions").doc(t).delete().then((function(){e({type:"DELETE_QUESTION",questionId:t})})).catch((function(t){e({type:"DELETE_QUESTION_ERROR",err:t})}))}}(0,a))}}})),Object(O.firestoreConnect)([{collection:"questions"}]))(M);var Y=function(){return r.a.createElement(s.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(d,null),r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/",component:B}),r.a.createElement(c.b,{path:"/signin",component:N}),r.a.createElement(c.b,{path:"/signup",component:w}),r.a.createElement(c.b,{exact:!0,path:"/instruction/:id",component:R}),r.a.createElement(c.b,{path:"/create",component:T}),r.a.createElement(c.b,{path:"/instruction/:id/edit",component:A}),r.a.createElement(c.b,{path:"/instruction/:id-:authorId/newQuestion",component:W}),r.a.createElement(c.b,{exact:!0,path:"/instruction/:id/:title/question",component:H}),r.a.createElement(c.b,{path:"/instruction/:instrucId/:title/question/:quesId/edit",component:K}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J={authError:null},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return console.log("login error"),Object(y.a)(Object(y.a)({},e),{},{authError:"Login failed"});case"LOGIN_SUCCESS":return console.log("login success"),Object(y.a)(Object(y.a)({},e),{},{authError:null});case"SIGNOUT_SUCCESS":return console.log("signout success"),e;case"SIGNUP_SUCCESS":return console.log("signup success"),Object(y.a)(Object(y.a)({},e),{},{authError:null});case"SIGNUP_ERROR":return console.log("signup error"),Object(y.a)(Object(y.a)({},e),{},{authError:t.error.message});default:return e}},V={},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_INSTRUCTION":return console.log("create instruction",t.instruction),e;case"CREATE_INSTRUCTION_ERROR":return console.log("create instruction error",t.error),e;case"EDIT_INSTRUCTION":return console.log("edited instruction",t.instruction),e;case"EDIT_INSTRUCTION_ERROR":return console.log("edit instruction error",t.err),e;case"DELETE_INSTRUCTION":return console.log("deleted instruction",t.id),e;case"DELETE_INSTRUCTION_ERROR":return console.log("deleted instruction error",t.err),e;default:return e}},Z={},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_QUESTION":return console.log("add question",t.question),e;case"ADD_QUESTION_ERROR":return console.log("add question error",t.error),e;case"EDIT_QUESTION":return console.log("edited instruction",t.question),e;case"EDIT_QUESTION_ERROR":return console.log("edit instruction error",t.err),e;case"DELETE_QUESTION":return console.log("deleted instruction",t.id),e;case"DELETE_QUESTION_ERROR":return console.log("deleted instruction error",t.err),e;default:return e}},te=a(63),ae=Object(I.c)({auth:$,instruction:X,question:ee,firestore:te.firestoreReducer,firebase:O.firebaseReducer}),ne=a(214),re=a(93),ie=a.n(re);a(403),a(406),a(409);ie.a.initializeApp({apiKey:"AIzaSyBzgWLIrtxnjRdiTn_7SIfoKTCi6pKkzmE",authDomain:"critical-instructions-lab.firebaseapp.com",databaseURL:"https://critical-instructions-lab.firebaseio.com",projectId:"critical-instructions-lab",storageBucket:"critical-instructions-lab.appspot.com",messagingSenderId:"121402491624",appId:"1:121402491624:web:a18042474c049be805ff5d"});ie.a.storage();var le=a(215),se=Object(I.e)(ae,Object(I.d)(Object(I.a)(ne.a.withExtraArgument({getFirebase:O.getFirebase,getFirestore:te.getFirestore})),Object(te.reduxFirestore)(ie.a),Object(O.reactReduxFirebase)(ie.a,{useFirestoreForProfile:!0,userProfile:"users",attachAuthIsReady:!0}))),ce={position:_.b.TOP_CENTER,timeout:5e3,offset:"30px",transition:_.c.SCALE};se.firebaseAuthIsReady.then((function(){l.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{store:se},r.a.createElement(_.a,Object.assign({template:le.a},ce),r.a.createElement(Y,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}))}},[[217,1,2]]]);
//# sourceMappingURL=main.53c821ea.chunk.js.map